<!doctype html><html lang=zh-tw dir=ltr><head><meta charset=utf-8><meta name=viewport content='width=device-width,initial-scale=1'><meta name=description content="介紹 MySQL Group Commit 的演進"><title>Group Commit</title>
<link rel=canonical href=https://FuweaY.github.io/p/mysql-group-commit/><link rel=stylesheet href=/scss/style.min.f28263e5961b456312e0eedc7ff92ffd1c19229bede3556136a281ca9ab8bf59.css><meta property='og:title' content="Group Commit"><meta property='og:description' content="介紹 MySQL Group Commit 的演進"><meta property='og:url' content='https://FuweaY.github.io/p/mysql-group-commit/'><meta property='og:site_name' content='FuweaY'><meta property='og:type' content='article'><meta property='article:section' content='Post'><meta property='article:tag' content='內核'><meta property='article:published_time' content='2025-03-27T12:00:00+08:00'><meta property='article:modified_time' content='2025-03-27T12:00:00+08:00'><meta name=twitter:title content="Group Commit"><meta name=twitter:description content="介紹 MySQL Group Commit 的演進"><link rel="shortcut icon" href=/favicon.png></head><body class=article-page><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"auto")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label=切換選單>
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header><figure class=site-avatar><a href=/><img src=/img/avatar_hu_da86993f15b2a166.png width=300 height=300 class=site-logo loading=lazy alt=Avatar>
</a><span class=emoji>🐱</span></figure><div class=site-meta><h1 class=site-name><a href=/>FuweaY</a></h1><h2 class=site-description>熱愛分享的 DBA 小天地</h2></div></header><ol class=menu-social><li><a href=https://github.com/FuweaY target=_blank title=GitHub rel=me><svg class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 19c-4.3 1.4-4.3-2.5-6-3m12 5v-3.5c0-1 .1-1.4-.5-2 2.8-.3 5.5-1.4 5.5-6a4.6 4.6.0 00-1.3-3.2 4.2 4.2.0 00-.1-3.2s-1.1-.3-3.5 1.3a12.3 12.3.0 00-6.2.0C6.5 2.8 5.4 3.1 5.4 3.1a4.2 4.2.0 00-.1 3.2A4.6 4.6.0 004 9.5c0 4.6 2.7 5.7 5.5 6-.6.6-.6 1.2-.5 2V21"/></svg></a></li></ol><ol class=menu id=main-menu><li><a href=/><svg class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="5 12 3 12 12 3 21 12 19 12"/><path d="M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"/><path d="M9 21v-6a2 2 0 012-2h2a2 2 0 012 2v6"/></svg>
<span>Home</span></a></li><li><a href=/archives/><svg class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><rect x="3" y="4" width="18" height="4" rx="2"/><path d="M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8"/><line x1="10" y1="12" x2="14" y2="12"/></svg>
<span>Archives</span></a></li><li><a href=/search/><svg class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="10" cy="10" r="7"/><line x1="21" y1="21" x2="15" y2="15"/></svg>
<span>Search</span></a></li><li><a href=/links/><svg class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M10 14a3.5 3.5.0 005 0l4-4a3.5 3.5.0 00-5-5l-.5.5"/><path d="M14 10a3.5 3.5.0 00-5 0l-4 4a3.5 3.5.0 005 5l.5-.5"/></svg>
<span>Links</span></a></li><li class=menu-bottom-section><ol class=menu><li id=dark-mode-toggle><svg class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<svg class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<span>夜晚模式</span></li></ol></li></ol></aside><aside class="sidebar right-sidebar sticky"><section class="widget archives"><div class=widget-icon><svg class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg></div><h2 class="widget-title section-title">目錄</h2><div class=widget--toc><nav id=TableOfContents><ol><li><a href=#前置知識>前置知識</a><ol><li><a href=#innodb-group-commit>InnoDB Group Commit</a><ol><li><a href=#binlogengine-2pc>Binlog/Engine 2PC</a></li></ol></li></ol></li><li><a href=#mysql-55含之前-innodb-group-commit-bug>MySQL 5.5(含)之前 InnoDB Group Commit Bug</a></li><li><a href=#mysql-56-binlog-group-commit>MySQL 5.6 BinLog Group Commit</a></li><li><a href=#mysql-57-redolog-group-commit>MySQL 5.7 RedoLog Group Commit</a><ol><li><a href=#圖解-group-commit>圖解 Group Commit</a></li><li><a href=#參數調優>參數調優</a></li><li><a href=#57-基於-group-commit-的-mts-優化>5.7 基於 Group Commit 的 MTS 優化</a></li></ol></li></ol></nav></div></section></aside><main class="main full-width"><article class=main-article><header class=article-header><div class=article-details><header class=article-category><a href=/categories/mysql/>MySQL</a></header><div class=article-title-wrapper><h2 class=article-title><a href=/p/mysql-group-commit/>Group Commit</a></h2><h3 class=article-subtitle>介紹 MySQL Group Commit 的演進</h3></div><footer class=article-time><div><svg class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg>
<time class=article-time--published>Mar 27, 2025</time></div><div><svg class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg>
<time class=article-time--reading>閱讀時間: 4 分鐘</time></div></footer></div></header><section class=article-content><p>在研究 MySQL MTS 時了解到 MySQL 有 Group Commit 機制，因此進行深入了解。</p><p>本文以下內容都基於 sync_binlog = 1 & innodb_flush_log_at_trx_commit = 1 的情境。</p><h2 id=前置知識>前置知識</h2><h3 id=innodb-group-commit>InnoDB Group Commit</h3><p>InnoDB 出於性能考量使用了 WAL (write-ahead logging) 技術：將更新操作修改內存中的數據修改後，先寫 log (InnoDB redo log) 就可以返回告訴 client 端 transaction 已經完成 commit， 後續再慢慢將 dirty page 寫入 Disk 持久化數據修改後的結果。</p><p>這樣除了可以透過 redo log 達到原子性 (atomicity) 和持久性 (durability) 的同時也能增加效率，因為寫 Log 是順序寫入相較於修改數據的隨機寫入快上許多。</p><p>雖然 WAL 技術下順序寫入的 redo log 比隨機寫入快，但是每次 Transaction commit 之前我們還是必須調用 <code>fsync()</code> 將 redo log 持久化到 Disk，然而 <code>fsync()</code> 是昂貴的操作 (消耗較多 IO 資源，並且響應較慢)，因此早在 MySQL 5.0 之前，就在 InnoDB redo log 上實現了 Group Commit 優化：將多個 Transaction 放入對列後一起 commit，減少 <code>fsync()</code> 的次數。</p><h4 id=binlogengine-2pc>Binlog/Engine 2PC</h4><p>在大部分的情境下，為了實現 replication 和基於時間點的恢復，一般 MySQL 實例都會開啟 binlog 來達成相應的目的，這個時候為了保證 Transaction 在 server 層 Log (Binlog) 和 engine 層 Log (例如：InnoDB 的 Redolog) 之間的原子性 (Atomicity)，因此需要透過兩階段提交 (Two-Phase-Commit, 2PC) 來確保，MySQL 透過內部 XA Transaction 來實現 2PC：</p><p><img src=/p/mysql-group-commit/XA-Transaction.jpg width=502 height=306 srcset="/p/mysql-group-commit/XA-Transaction_hu_68462a291618cc08.jpg 480w, /p/mysql-group-commit/XA-Transaction_hu_6ef7c8a7bbc62a4e.jpg 1024w" loading=lazy alt=XA-Transaction class=gallery-image data-flex-grow=164 data-flex-basis=393px></p><p>在上述過程下 MySQL 確保了 transaction 在 redo log 和 binlog 之間的原子性 (Atomicity)。</p><p>為什麼這樣能確保 redo log 和 binlog 之間的原子性 (Atomicity) 呢？</p><p>MySQL crash recovery 的流程：</p><ol><li><p>掃描最後一個 binlog 文件，提取其中的 XID</p><p>備註：只需要掃描最後一個 binlog 是因為 MySQL 在 rotate 到新的 binlog 文件時，總是保證沒有正在 commit 的 Transaction 之後，會調用 <code>fsync()</code> 持久化 redo log，來保證舊的 binlog 裡的所有 Transaction 都在 redo log 中 commit。</p></li><li><p>將 redo log 中還在 prepare 的 Transaction 的 XID 和 binlog 比對：</p><ol><li>如果已經在 binlog，則 commit trnsaction。</li><li>如果不在 binlog，則 rollback transaction。</li></ol></li></ol><p>由上述步驟我們可以知道當 MySQL Crash 後，透過 Crash Recovery 可以保證 Transaction 在 redo log 和 binlog 的 commit 狀態是一致的，也就達到 redo log 和 binlog 之間的原子性 (Atomicity)。</p><h2 id=mysql-55含之前-innodb-group-commit-bug>MySQL 5.5(含)之前 InnoDB Group Commit Bug</h2><p>在 MySQL 5.5 (含)之前的版本，當 Binlog 開啟時會導致 InnoDB Group Commit 失效，這導致了效能的急遽下降，尤其是當 sync_binlog = 1 & innodb_flush_log_at_trx_commit = 1 的時候簡直是災難。</p><p>在 MySQL 5.5 的時候 2PC 的具體過程如下：</p><p><img src=/p/mysql-group-commit/MySQL-55-2PC.jpg width=1280 height=640 srcset="/p/mysql-group-commit/MySQL-55-2PC_hu_d70f8bde4311d251.jpg 480w, /p/mysql-group-commit/MySQL-55-2PC_hu_8703184c2dbd00c8.jpg 1024w" loading=lazy alt=MySQL-55-2PC class=gallery-image data-flex-grow=200 data-flex-basis=480px></p><p>在上述過程中 InnoDB Prepare 階段的最後會上一個 prepare_commit_mutex 的鎖，並在 InnoDB Commit 階段釋放，用來確保同一個時刻只有一個線程在處理 Binlog 寫入和 InnoDB Commit，保證 Transaction 在 Binlog 和 Redo Log 中 Commit 順序是一致的。</p><p>可以發現有以下問題：</p><ol><li>因為一次只能有一個 Transaction 取得 prepare_commit_mutex 這個鎖，導致無法應用 InnoDB Group Commit，每一個 Transaction 都必須單獨 <code>fsync()</code>。</li><li>一個 Transaction 就調用了 3次 <code>fsync()</code>：<ol><li>InnoDB Prepare (寫 redolog)</li><li>Binlog Commit (寫 binlog)</li><li>InnoDB Commit (寫 commit)</li></ol></li></ol><p>也就是說在開啟雙 1 時，每個 Transaction 都必須單獨 <code>fsync()</code> 3 次導致了性能的急遽下降，這就是很知名的 <a class=link href="https://bugs.mysql.com/bug.php?id=49326" target=_blank rel=noopener></a><a class=link href="https://bugs.mysql.com/bug.php?id=13669" target=_blank rel=noopener>**MySQL Bugs: #13669: Group commit is broken in 5.0</a>** 同時也有人提議讓 Binlog 也支援 Group Commit： <a class=link href="https://bugs.mysql.com/bug.php?id=49326" target=_blank rel=noopener><strong>MySQL Bugs: #49326: Support group commit for the binlog</strong></a>。</p><h2 id=mysql-56-binlog-group-commit>MySQL 5.6 BinLog Group Commit</h2><p>在 MySQL 5.6 時 binlog 實現了 Group Commit 減少了 binlog 的 <code>fsync()</code> 次數，同時透過將 commit 操作拆分成 3 個階段 (同時 prepare_commit_mutex 大鎖也被拆分為 3 個小鎖) 以此來並行執行增加效率。</p><p>MySQL 5.6 的時候 2PC 的具體過程如下：</p><p><img src=/p/mysql-group-commit/MySQL-56-2PC.jpg width=4836 height=1736 srcset="/p/mysql-group-commit/MySQL-56-2PC_hu_926208359f37a712.jpg 480w, /p/mysql-group-commit/MySQL-56-2PC_hu_29d900b2409dc255.jpg 1024w" loading=lazy alt=MySQL-56-2PC class=gallery-image data-flex-grow=278 data-flex-basis=668px></p><p>和 MySQL 5.5 相比，可以看到 prepare 階段保持不變，但移除了 prepare_commit_mutex 這把大鎖，並將 commit 階段拆分為以下三個過程：</p><ol><li>flush 階段：寫入 binlog 文件，也就是寫入 OS Page Cache 不強制執行 <code>fsync()</code> 寫入 Disk。</li><li>sync 階段：對 binlog 文件做 <code>fsync()</code> 操作 (也就是 binlog group commit)。</li><li>commit 階段：執行 InnoDB commit 操作。</li></ol><p>在每個階段都有一個對列，同一個對列中第一個進入的 Transaction (稱為 Leader) 會帶領後續進入的 Transaction (稱為 Follower) 執行該階段的任務。</p><p>在執行該階段的任務時會持有該階段的鎖，保證一個階段只有一個對列在工作，同時每個對列中的 Transaction 依次執行，這確保了 Transaction 寫入的順序。</p><p><img src=/p/mysql-group-commit/MySQL-Group-Commit-Stage.jpg width=2000 height=1061 srcset="/p/mysql-group-commit/MySQL-Group-Commit-Stage_hu_834cf846a2e9d3e9.jpg 480w, /p/mysql-group-commit/MySQL-Group-Commit-Stage_hu_fb6ac6bbf45eedab.jpg 1024w" loading=lazy alt=MySQL-Group-Commit-Stage class=gallery-image data-flex-grow=188 data-flex-basis=452px></p><h2 id=mysql-57-redolog-group-commit>MySQL 5.7 RedoLog Group Commit</h2><p>在 5.6 的時候雖然實現了 binlog group commit 的優化，但是 InnoDB redo log 仍沒有。</p><p>在 MySQL 5.7 的時候 2PC 的具體過程如下：</p><p><img src=/p/mysql-group-commit/MySQL-57-2PC.jpg width=4836 height=1776 srcset="/p/mysql-group-commit/MySQL-57-2PC_hu_f667ff8c558ffc32.jpg 480w, /p/mysql-group-commit/MySQL-57-2PC_hu_5a25cfb3b6b3d131.jpg 1024w" loading=lazy alt=MySQL-57-2PC class=gallery-image data-flex-grow=272 data-flex-basis=653px></p><p>和 MySQL 5.6 相比，在 InnoDB Prepare 的時候不進行 redolog 的 <code>fsync()</code>，而是在 flush 階段寫 binlog 文件前進行 redolog 的 write/fsync，在 flush 階段已經有對列了等於實現了 InnoDB Group Commit 的動作，大幅減少了 redolog 執行的 <code>fsync()</code> 操作。</p><p>具體可以這樣優化的原因需要從 Crash Recovery 的邏輯來看－</p><p>從上述 crash recovery 的恢復邏輯中我們可以知道，只要保證 InnoDB Prepare 的 RedoLog 只要在寫入 binlog 之前完成 write/fsync 即可，因此 RedoLog 的 write/fsync 可以移到 flush 階段內 binlog 寫入之前。</p><aside>💡 這是由阿里巴巴貢獻的優化：[MySQL Bugs: #73202: write/sync redo log before flush thread cache to binlog](https://bugs.mysql.com/bug.php?id=73202)</aside><h3 id=圖解-group-commit>圖解 Group Commit</h3><p><img src=/p/mysql-group-commit/MySQL-Group-Commit-Detail.jpg width=680 height=2353 srcset="/p/mysql-group-commit/MySQL-Group-Commit-Detail_hu_a75c10e3b648bd1b.jpg 480w, /p/mysql-group-commit/MySQL-Group-Commit-Detail_hu_484d85ef97c47b75.jpg 1024w" loading=lazy alt=MySQL-Group-Commit-Detail class=gallery-image data-flex-grow=28 data-flex-basis=69px></p><h3 id=參數調優>參數調優</h3><p>此外還新增了以下 2 個參數用來控制 sync 階段等待的時間點：</p><ul><li>binlog_group_commit_sync_delay = N：對列等待 N 微秒後，開始 sync binlog。</li><li>binlog_group_commit_sync_no_delay_count = N：當對列中的 Transaction 達到 N 個後就忽略 binlog_group_commit_sync_delay 的設定開始 sync binlog。</li></ul><p>當以上設定越大時，就能一次 commit 更多的 transaction 也就是調用更少的 <code>fsync()</code>，但同時 client 端也需先等待才能收到 commit 的回覆，因此需要謹慎評估適合的值。</p><h3 id=57-基於-group-commit-的-mts-優化>5.7 基於 Group Commit 的 MTS 優化</h3><p>5.7 這個版本也優化了 MTS 的回放效率，在 5.6 時只有不同 Database 的 Transaction 才能在 Replica 並行回放，在 5.7 時只要在 Source 是同一個 Group 一起 Commit 的 Transaction 就能在 Replica 並行回放，實現方式是在 Binlog 中添加以下 2 個值：</p><ul><li>sequence_number：每個 Transaction 的序列號，在同一個 Binlog 文件中不會重複。</li><li>last_commited：紀錄 binlog group commit 時 leader 的 sequence_number</li></ul><p><img src=/p/mysql-group-commit/MySQL-57-Group-Commit-Binlog.jpg width=620 height=156 srcset="/p/mysql-group-commit/MySQL-57-Group-Commit-Binlog_hu_93c2ed8d3ad2d43f.jpg 480w, /p/mysql-group-commit/MySQL-57-Group-Commit-Binlog_hu_2b0916607930b4a2.jpg 1024w" loading=lazy alt="透過 mysqlbinlog 可以看到 binlog 中每個 Transaction 都有這 2 個變量" class=gallery-image data-flex-grow=397 data-flex-basis=953px></p><p>透過 mysqlbinlog 可以看到 binlog 中每個 Transaction 都有這 2 個變量</p><p>也就是只要 Transaction 在 Binlog 中的 last_committed 相同，那麼就可以在 Replica 並行回放。</p><h1 id=參考>參考</h1><p><a class=link href=http://mysql.taobao.org/monthly/2020/05/07/ target=_blank rel=noopener>MySQL · 源码分析 · 内部 XA 和组提交 (taobao.org)</a></p><p><a class=link href=http://mysql.taobao.org/monthly/2015/01/01/ target=_blank rel=noopener>MySQL · 性能优化· Group Commit优化 (taobao.org)</a></p><p><a class=link href=http://mysql.taobao.org/monthly/2018/06/04/ target=_blank rel=noopener>MySQL · 特性分析 · 8.0 WriteSet 并行复制 (taobao.org)</a></p><p><a class=link href=http://mysql.taobao.org/monthly/2018/08/01/ target=_blank rel=noopener>MySQL · 引擎特性 · 主库 binlog 概览 (taobao.org)</a></p><p><a class=link href=http://mysql.taobao.org/monthly/2015/12/01/ target=_blank rel=noopener>MySQL · 引擎特性 · InnoDB 事务子系统介绍 (taobao.org)</a></p><p><a class=link href="https://www.linuxidc.com/wap.aspx?nid=128831&amp;p=2&amp;cid=7&amp;sp=427" target=_blank rel=noopener>MySQL · 引擎特性· InnoDB undo log 漫游</a></p><p><a class=link href=http://mysql.taobao.org/monthly/2015/05/01/ target=_blank rel=noopener>MySQL · 引擎特性 · InnoDB redo log漫游 (taobao.org)</a></p><p><a class=link href=http://mysql.taobao.org/monthly/2015/06/01/ target=_blank rel=noopener>MySQL · 引擎特性 · InnoDB 崩溃恢复过程 (taobao.org)</a></p><p><a class=link href=https://zhuanlan.zhihu.com/p/348828585 target=_blank rel=noopener>金融级角度专业理解MySQL两阶段提交</a></p><p><a class=link href=https://www.orczhou.com/index.php/2010/08/time-to-group-commit-1/ target=_blank rel=noopener>MySQL/InnoDB和Group Commit(1) - Life, Database and Cloud Computing (orczhou.com)</a></p><p><a class=link href=http://keithlan.github.io/2018/07/24/mysql_group_commit/ target=_blank rel=noopener>MySQL5.7 核心技术揭秘：MySQL Group commit | Focus on MySQL,Focus on Life (keithlan.github.io)</a></p><p><a class=link href=https://opensource.actionsky.com/20190404-mgr/ target=_blank rel=noopener>图解MySQL | MySQL组提交(group commit) (actionsky.com)</a></p><p><a class=link href=http://mysqlmusings.blogspot.com/2012/06/binary-log-group-commit-in-mysql-56.html target=_blank rel=noopener>MySQL Musings: Binary Log Group Commit in MySQL 5.6</a></p><p><a class=link href=https://zhuanlan.zhihu.com/p/142491549 target=_blank rel=noopener>MySQL 的 crash-safe 原理解析 - 知乎 (zhihu.com)</a></p><p><a class=link href="https://wenku.baidu.com/view/493a0b3d4b35eefdc9d33306.html?re=view&_wkts_=1671088504639" target=_blank rel=noopener>Mysql+Innodb源代码调试跟踪分析+何登成_IT168文库 - 百度文库 (baidu.com)</a></p><p><a class=link href=https://www.cnblogs.com/yuyue2014/p/4738007.html target=_blank rel=noopener>mysql 事务提交过程 - yuyue2014 - 博客园 (cnblogs.com)</a></p><p><a class=link href=https://zhuanlan.zhihu.com/p/38382205 target=_blank rel=noopener>MySQL 5.7版本XA事务若干bug分析 - 知乎 (zhihu.com)</a></p><p><a class=link href=https://sq.sf.163.com/blog/article/188020255134334976 target=_blank rel=noopener>深入剖析MySQL group commit实现 （上）-社区博客-网易数帆 (163.com)</a></p><p><a class=link href=https://sq.sf.163.com/blog/article/188020984930648064 target=_blank rel=noopener>深入剖析MySQL group commit实现（下）-社区博客-网易数帆 (163.com)</a></p></section><footer class=article-footer><section class=article-tags><a href=/tags/%E5%85%A7%E6%A0%B8/>內核</a></section><section class=article-copyright><svg class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><path d="M14.5 9a3.5 4 0 100 6"/></svg>
<span>Licensed under CC BY-NC-SA 4.0</span></section></footer></article><aside class=related-content--wrapper><h2 class=section-title>相關文章</h2><div class=related-content><div class="flex article-list--tile"><article><a href=/p/mysql-implicit-lock/><div class=article-details><h2 class=article-title>隱式鎖</h2></div></a></article><article><a href=/p/mysql-partition-deadlock/><div class=article-details><h2 class=article-title>partition deadlock</h2></div></a></article><article><a href=/p/mysql-semi-join-and-anti-join/><div class=article-details><h2 class=article-title>semi-join(半連結)和anti-join(反連結)</h2></div></a></article><article><a href=/p/mysql-exists-optimize/><div class=article-details><h2 class=article-title>MySQL8.0 EXISTS 及 NOT IN/EXISTS 優化</h2></div></a></article><article><a href=/p/mysql-mts/><div class=article-details><h2 class=article-title>並行複製 (Multi-Thread Slave, MTS)</h2></div></a></article></div></div></aside><div class=disqus-container><div id=disqus_thread></div><script>window.disqus_config=function(){},function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="//小小 DBA 個人筆記.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)}()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></div><style>.disqus-container{background-color:var(--card-background);border-radius:var(--card-border-radius);box-shadow:var(--shadow-l1);padding:var(--card-padding)}</style><script>window.addEventListener("onColorSchemeChange",e=>{typeof DISQUS=="object"&&DISQUS.reset({reload:!0})})</script><footer class=site-footer><section class=copyright>&copy;
2020 -
2025 FuweaY</section><section class=powerby>使用 <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a> 建立<br>主題 <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=3.30.0>Stack</a></b> 由 <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a> 設計</section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
</button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css crossorigin=anonymous></main></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z+KMkF24hUW8WePSA9HM=" crossorigin=anonymous></script><script type=text/javascript src=/ts/main.1e9a3bafd846ced4c345d084b355fb8c7bae75701c338f8a1f8a82c780137826.js defer></script><script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script></body></html>